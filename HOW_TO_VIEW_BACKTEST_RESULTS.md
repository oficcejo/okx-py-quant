# 📊 如何查看回测结果

## 方式一：前端页面查看（推荐） ⭐

### 1. 访问前端界面
打开浏览器访问：**http://127.0.0.1:5173**

### 2. 进入策略回测页面
点击左侧菜单的 **"策略回测"**

### 3. 运行回测
- 选择策略
- 选择时间范围
- 设置初始资金
- 点击"运行回测"按钮

### 4. 查看结果 ✨
回测完成后，在下方的表格中：
- 找到状态为 **FINISHED** 的回测记录
- 点击该行右侧的 **"查看结果"** 按钮（眼睛图标 👁️）

### 5. 结果详情弹窗展示
弹窗中会显示：

#### 📈 统计数据
- **初始资金**: 回测开始时的资金
- **最终资金**: 回测结束时的资金
- **盈亏金额**: 赚/亏了多少 USDT（绿色为盈利，红色为亏损）
- **收益率**: 盈亏百分比

#### 📊 其他指标
- **交易次数**: 策略触发了多少次买卖
- **数据点数**: 回测使用的K线数量
- **回测时间范围**: 回测的起止日期

#### 📉 权益曲线图表
- 直观展示资金随时间的变化
- 鼠标悬停可查看具体时间点的资金数额
- 曲线上升表示盈利，下降表示亏损

---

## 方式二：通过API直接查看

### 查询所有回测记录
```bash
curl http://127.0.0.1:8000/backtests/
```

### 运行测试脚本
```bash
cd f:\test\okx-py-quant-qoder
.venv\Scripts\Activate.ps1
python test_backtest.py
```

脚本会显示：
- 回测执行过程
- 盈亏分析
- 权益曲线关键点

---

## 📸 前端界面示例

### 回测列表页面
```
┌─────────────────────────────────────────────┐
│ 策略回测                                     │
├─────────────────────────────────────────────┤
│ [策略选择] [时间范围] [初始资金] [运行回测]  │
├─────────────────────────────────────────────┤
│ ID | 策略ID | 开始时间 | 结束时间 | 初始资金 | 状态 | 操作 │
│ 4  |   1    | 12-21   | 12-28   | 10000   | ✅FINISHED | [👁️查看结果] │
│ 3  |   1    | 12-21   | 12-28   | 10000   | ❌FAILED   |              │
└─────────────────────────────────────────────┘
```

### 回测结果弹窗
```
┌───────────────────────────────────────────────────────┐
│ 回测结果详情                                  [关闭]  │
├───────────────────────────────────────────────────────┤
│                                                        │
│  初始资金        最终资金        盈亏金额      收益率 │
│  10000.00       9854.37        -145.63       -1.46%   │
│   USDT           USDT           USDT          %       │
│                                                        │
│  交易次数        数据点数        回测时间范围         │
│    17              168          12-21 ~ 12-28         │
│                                                        │
├───────────────────────────────────────────────────────┤
│                    权益曲线                            │
│                                                        │
│  10000 ┤                                              │
│   9900 ┤    ╱╲    ╱╲                                  │
│   9800 ┤   ╱  ╲  ╱  ╲╱╲                               │
│   9700 ┤  ╱    ╲╱      ╲                              │
│   9600 ┤                 ╲                            │
│        └─────────────────────────────────────         │
│         12-21  12-23  12-25  12-27  12-28            │
│                                                        │
└───────────────────────────────────────────────────────┘
```

---

## 🎯 快速开始

1. **确保服务运行**
   ```powershell
   # 后端
   uvicorn app.main:app --reload
   
   # 前端
   cd frontend
   npm run dev
   ```

2. **访问页面**
   - 打开浏览器访问 http://127.0.0.1:5173
   - 点击"策略回测"菜单

3. **运行回测**
   - 选择策略和时间范围
   - 点击"运行回测"

4. **查看结果**
   - 点击回测记录右侧的"查看结果"按钮 👁️
   - 在弹窗中查看详细的盈亏分析和权益曲线

---

## ✨ 功能特性

✅ **实时回测** - 基于本地K线数据快速回测  
✅ **可视化展示** - 权益曲线图表直观展示  
✅ **详细统计** - 盈亏分析、交易次数等指标  
✅ **历史记录** - 保存所有回测结果供对比  
✅ **状态标识** - 清晰标识成功/失败/运行中的回测  

---

## 💡 提示

- 回测结果会永久保存在数据库中
- 可以对比不同策略的回测结果
- 绿色数字表示盈利，红色表示亏损
- 鼠标悬停在图表上可查看详细数据
